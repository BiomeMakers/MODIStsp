<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MODIStsp: A Tool for Automatic Preprocessing of MODIS Time Series - v2.0.0 • MODIStsp</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="MODIStsp: A Tool for Automatic Preprocessing of MODIS Time Series - v2.0.0">
<meta property="og:description" content="MODIStsp">
<meta property="og:image" content="http://docs.ropensci.org/MODIStsp/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-84499524-2"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-84499524-2');
</script>
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">MODIStsp</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">2.0.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home"></span>
     
  </a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fas fa fas fa-book"></span>
     
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/installation.html">Installation</a>
    </li>
    <li>
      <a href="../articles/interactive_execution.html">Interactive Execution - the MODIStsp GUI</a>
    </li>
    <li>
      <a href="../articles/noninteractive_execution.html">Non-Interactive Execution from within R</a>
    </li>
    <li>
      <a href="../articles/standalone_execution.html">Standalone Execution and Scheduled Processing</a>
    </li>
    <li>
      <a href="../articles/output.html">Outputs Format and Naming Conventions</a>
    </li>
    <li>
      <a href="../articles/analyze.html">Accessing and Analyzing Processed Data from R</a>
    </li>
    <li>
      <a href="../articles/Products_list.html">Supported MODIS Products</a>
    </li>
  </ul>
</li>
<li>
  <a href="../articles/faq.html">
    <span class="fa fa-question-circle-o"></span>
     
    faq
  </a>
</li>
<li>
  <a href="../news/index.html">
    <span class="fa fa-newspaper-o"></span>
     
    news
  </a>
</li>
<li>
  <a href="../reference/index.html">
    <span class="fa fa-file-code-o"></span>
     
    functions
  </a>
</li>
<li>
  <a href="https://github.com/ropensci/MODIStsp/">
    <span class="fa fa-github fa-lg"></span>
     
    github
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="MODIStsp_files/header-attrs-2.3/header-attrs.js"></script><script src="MODIStsp_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>MODIStsp: A Tool for Automatic Preprocessing of MODIS Time Series - v2.0.0</h1>
                        <h4 class="author">Lorenzo Busetto (<a href="mailto:lbusett@gmail.com">busetto.l@irea.cnr.it</a>), Luigi Ranghetti (<a href="mailto:ranghetti.l@irea.cnr.it">ranghetti.l@irea.cnr.it</a>)</h4>
            
            <h4 class="date">2020-08-30</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/ropensci/MODIStsp/blob/master/vignettes/MODIStsp.Rmd"><code>vignettes/MODIStsp.Rmd</code></a></small>
      <div class="hidden name"><code>MODIStsp.Rmd</code></div>

    </div>

    
    
<div id="introduction" class="section level1">
<h1 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h1>
<p>MODIStsp is a novel “R” package allowing to automatize the creation of time series of rasters derived from MODIS Land Products data. It allows to perform several preprocessing steps on MODIS data available within a given time period.</p>
<p>Development of MODIStsp started from modifications of the ModisDownload “R” script by Thomas Hengl <span class="citation">(2010)</span>, and successive adaptations by Babak Naimi <span class="citation">(2014)</span>. The basic functionalities for download and preprocessing of MODIS datasets provided by these scripts were gradually incremented with the aim of:</p>
<ul>
<li>developing a stand-alone application allowing to perform several preprocessing steps (e.g., download, mosaicing, reprojection and resize) on all available MODIS land products by exploiting a powerful and user-friendly GUI front-end;</li>
<li>allowing the creation of time series of both MODIS original layers and additional Quality Indicators (e.g., data acquisition quality, cloud/snow presence, algorithm used for data production, etc. ) extracted from the aggregated bit-field QA layers;</li>
<li>allowing the automatic calculation and creation of time series of several additional Spectral Indexes starting form MODIS surface reflectance products.</li>
</ul>
<p>All processing parameters can be easily set with a user-friendly GUI, although non-interactive execution exploiting a previously created Options File is possible. Stand-alone execution outside an “R” environment is also possible, allowing to use scheduled execution of MODIStsp to automatically update time series related to a MODIS product and extent whenever a new image is available.</p>
<p>Required MODIS HDF files are automatically downloaded from NASA servers and resized, reprojected, resampled and processed according to user’s choices. For each desired output layer, outputs are saved as single-band rasters corresponding to each acquisition date available for the selected MODIS product within the specified time period. “R” <em>RasterStack</em> objects with temporal information as well as Virtual raster files (GDAL vrt and ENVI META files) facilitating access to the entire time series can be also created.</p>
</div>
<div id="installation" class="section level1">
<h1 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h1>
<p><code>MODIStsp</code> requires <a href="https://cran.r-project.org">R</a> v &gt;= 3.6.3</p>
<div id="on-windows" class="section level2">
<h2 class="hasAnchor">
<a href="#on-windows" class="anchor"></a>On Windows</h2>
<p>You can install the stable version of <code>MODIStsp</code> from CRAN:</p>
<p><code><a href="https://rdrr.io/r/utils/install.packages.html">install.packages("MODIStsp")</a></code></p>
<p>, or the development version (containing the latest improvements and bug fixes) from github:</p>
<div class="sourceCode" id="cb1"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span>(<span class="st">"remotes"</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">remotes</span>)
<span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html">install_github</a></span>(<span class="st">"ropensci/MODIStsp"</span>)</pre></body></html></div>
</div>
<div id="on-linux-systems" class="section level2">
<h2 class="hasAnchor">
<a href="#on-linux-systems" class="anchor"></a>On Linux systems</h2>
<p>To install <code>MODIStsp</code> on Linux, you need to be able to install the <code>sf</code> package, which requires several dependencies. See <a href="https://github.com/r-spatial/sf#installing">HERE</a> if you have trouble installing <code>sf</code>.</p>
<p>Then, you can install the stable version of MODIStsp from CRAN:</p>
<div class="sourceCode" id="cb2"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span>(<span class="st">"MODIStsp"</span>)</pre></body></html></div>
<p>, or the development version (containing the latest improvements and bug fixes) from github;</p>
<div class="sourceCode" id="cb3"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">devtools</span>)
<span class="fu"><a href="https://devtools.r-lib.org//reference/remote-reexports.html">install_github</a></span>(<span class="st">"ropensci/MODIStsp"</span>)</pre></body></html></div>
</div>
<div id="on-mac-os" class="section level2">
<h2 class="hasAnchor">
<a href="#on-mac-os" class="anchor"></a>On Mac OS</h2>
<p>To install <code>MODIStsp</code> on MacOS, you need to be able to install the <code>sf</code> package, which requires several dependencies. See <a href="https://github.com/r-spatial/sf#installing">HERE</a> if you have trouble installing <code>sf</code>.</p>
<p>Then, you can install the stable version of MODIStsp from CRAN:</p>
<div class="sourceCode" id="cb4"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span>(<span class="st">"MODIStsp"</span>)</pre></body></html></div>
<p>, or the development version (containing the latest improvements and bug fixes) from github;</p>
<div class="sourceCode" id="cb5"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">devtools</span>)
<span class="fu"><a href="https://devtools.r-lib.org//reference/remote-reexports.html">install_github</a></span>(<span class="st">"ropensci/MODIStsp"</span>)</pre></body></html></div>
<p>Good luck!</p>
</div>
</div>
<div id="running-the-tool-in-interactive-mode-the-modistsp-gui" class="section level1">
<h1 class="hasAnchor">
<a href="#running-the-tool-in-interactive-mode-the-modistsp-gui" class="anchor"></a>Running the tool in Interactive Mode: the MODIStsp GUI</h1>
<p>The easiest way to use <code>MODIStsp</code> is to use its powerful GUI (Graphical User Interface) for selection of processing options, and then run the processing.</p>
<p>To open the GUI, load the package and launch the MODIStsp function, with no parameters:</p>
<div class="sourceCode" id="cb6"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">MODIStsp</span>)
<span class="fu"><a href="../reference/MODIStsp.html">MODIStsp</a></span>()</pre></body></html></div>
<p>This <strong>opens a GUI</strong> from which processing options can be specified and eventually saved (or loaded)</p>
<p>The GUI allows selecting all processing options required for the creation of the desired MODIS time series. The main available processing options are described in detail in the following.</p>
<p><img src="MODIStsp_files/figure-html/GUIfig-1.png" width="960" style="display: block; margin: auto;"></p>
<p>See (<a href="https://docs.ropensci.org/MODIStsp/articles/interactive_execution.html" class="uri">https://docs.ropensci.org/MODIStsp/articles/interactive_execution.html</a>) for further info and instructions regarding the usage of the GUI.</p>
</div>
<div id="non-interactive-execution-from-within-r" class="section level1">
<h1 class="hasAnchor">
<a href="#non-interactive-execution-from-within-r" class="anchor"></a>Non-Interactive Execution from within R</h1>
<p><code>MODIStsp</code> can be launched in non-interactive mode within an <code>R</code> session by setting the optional <code>GUI</code> parameter to FALSE, and either providing the desired processing argument in the call to the function, or providing a previously saved <code>opts_file</code> specifying the path to a JSON Options file previously saved through the GUI. This allows to exploit <code>MODIStsp</code> functionalities within generic “R” processing scripts.</p>
<div id="specifying-the-processing-parameters-in-the-function-call" class="section level2">
<h2 class="hasAnchor">
<a href="#specifying-the-processing-parameters-in-the-function-call" class="anchor"></a><strong>Specifying the processing parameters in the function call</strong>
</h2>
<p>All processing parameters can be set in the call to <code>MODIStsp</code>. Mandatory parameters are <code>selprod</code> (specifying the MODIS product), (one of) <code>bandsel</code>, <code>quality_bandsel</code> or <code>indexes_bandsel</code>, (that specify the desired output layers), <code>out_folder</code> and <code>start_date</code> and <code>end_date</code>. <code>user</code> and <code>password</code> are also needed if <code>download_server</code> is not equal to <code>offline</code>.</p>
<p>The new function <code>MODIStsp_get_prodlayers</code> allows to easily retrieve the names of products and available layers based on product code, such as in:</p>
<div class="sourceCode" id="cb7"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">MODIStsp</span>)
<span class="fu"><a href="../reference/MODIStsp_get_prodlayers.html">MODIStsp_get_prodlayers</a></span>(<span class="st">"M*D13Q1"</span>)</pre></body></html></div>
<pre><code>## $prodname
## [1] "Vegetation Indexes_16Days_250m (M*D13Q1)"
## 
## $bandnames
##  [1] "NDVI"     "EVI"      "VI_QA"    "b1_Red"   "b2_NIR"   "b3_Blue" 
##  [7] "b7_SWIR"  "View_Zen" "Sun_Zen"  "Rel_Az"   "DOY"      "Rely"    
## 
## $bandfullnames
##  [1] "16 day NDVI average"                "16 day EVI average"                
##  [3] "VI quality indicators"              "Surface Reflectance Band 1"        
##  [5] "Surface Reflectance Band 2"         "Surface Reflectance Band 3"        
##  [7] "Surface Reflectance Band 7"         "View zenith angle of VI pixel"     
##  [9] "Sun zenith angle of VI pixel"       "Relative azimuth angle of VI pixel"
## [11] "Day of year of VI pixel"            "Quality reliability of VI pixel"   
## 
## $quality_bandnames
## [1] "QA_qual"     "QA_usef"     "QA_aer"      "QA_adj_cld"  "QA_BRDF"    
## [6] "QA_mix_cld"  "QA_land_wat" "QA_snow_ice" "QA_shd"     
## 
## $quality_fullnames
## [1] "VI Quality"                          
## [2] "VI usefulness"                       
## [3] "Aerosol quantity"                    
## [4] "Adjacent cloud detected"             
## [5] "Atmosphere BRDF correction performed"
## [6] "Mixed Clouds"                        
## [7] "Land/Water Flag"                     
## [8] "Possible snow/ice"                   
## [9] "Possible shadow"                     
## 
## $indexes_bandnames
## [1] "SR"    "NDFI"  "NDII7" "SAVI" 
## 
## $indexes_fullnames
## [1] "Simple Ratio (NIR/Red)"              
## [2] "Flood Index (Red-SWIR2)/(Red+SWIR2)" 
## [3] "NDII7 (NIR-SWIR2)/(NIR+SWIR2)"       
## [4] "SAVI (NIR-Red)/(NIR+Red+0.5)*(1+0.5)"</code></pre>
<p>The other parameters are set automatically to default values (see XXX for details on the different available function arguments).</p>
<p>For example, the following code processes layers <strong>NDVI</strong> and <strong>EVI</strong> and quality indicator <strong>usefulness</strong> of product __M*D13Q1__, considering both Terra and Aqua platforms, for dates comprised between 2020-06-01 and 2020-06-15 and saves output to R tempdir:</p>
<div class="sourceCode" id="cb9"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">MODIStsp</span>)

<span class="co"># **NOTE** Output files of examples are saved to file.path by setting out_folder to $tempdir.</span>

<span class="co"># --&gt; See name and available layers for product M*D13Q1</span>
<span class="co"># MODIStsp_get_prodlayers("M*D13A2")</span>

<span class="co"># --&gt; Launch the processing</span>
<span class="fu"><a href="../reference/MODIStsp.html">MODIStsp</a></span>(<span class="kw">gui</span>             <span class="kw">=</span> <span class="fl">FALSE</span>,
         <span class="kw">out_folder</span>      <span class="kw">=</span> <span class="st">"$tempdir"</span>,
         <span class="kw">selprod</span>         <span class="kw">=</span> <span class="st">"Vegetation_Indexes_16Days_1Km (M*D13A2)"</span>,
         <span class="kw">bandsel</span>         <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"EVI"</span>, <span class="st">"NDVI"</span>),
         <span class="kw">quality_bandsel</span> <span class="kw">=</span> <span class="st">"QA_usef"</span>,
         <span class="kw">indexes_bandsel</span> <span class="kw">=</span> <span class="st">"SR"</span>,
         <span class="kw">user</span>            <span class="kw">=</span> <span class="st">"mstp_test"</span> ,
         <span class="kw">password</span>        <span class="kw">=</span> <span class="st">"MSTP_test_01"</span>,
         <span class="kw">start_date</span>      <span class="kw">=</span> <span class="st">"2020.06.01"</span>,
         <span class="kw">end_date</span>        <span class="kw">=</span> <span class="st">"2020.06.15"</span>,
         <span class="kw">verbose</span>         <span class="kw">=</span> <span class="fl">FALSE</span>)

<span class="co"># Outputs are in this case in subfolder "MODIStsp/VI_16Days_1Km_v6" of </span>
<span class="co"># `base::tempdir()`: </span>

<span class="no">out_fold</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/tempfile.html">tempdir</a></span>(), <span class="st">"MODIStsp/VI_16Days_1Km_v6/"</span>)
<span class="fu"><a href="https://rdrr.io/r/base/list.files.html">list.files</a></span>(<span class="no">out_fold</span>)</pre></body></html></div>
<pre><code>## [1] "EVI"     "NDVI"    "QA_usef" "SR"</code></pre>
<div class="sourceCode" id="cb11"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/list.files.html">list.files</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span>(<span class="no">out_fold</span> ,<span class="st">"EVI"</span>))</pre></body></html></div>
<pre><code>## [1] "MOD13A2_EVI_2020_161.tif" "MYD13A2_EVI_2020_153.tif"</code></pre>
<div class="sourceCode" id="cb13"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/list.files.html">list.files</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span>(<span class="no">out_fold</span> ,<span class="st">"QA_usef"</span>))</pre></body></html></div>
<pre><code>## [1] "MOD13A2_QA_usef_2020_161.tif" "MYD13A2_QA_usef_2020_153.tif"</code></pre>
</div>
<div id="launching-modistsp-using-a-saved-options-file" class="section level2">
<h2 class="hasAnchor">
<a href="#launching-modistsp-using-a-saved-options-file" class="anchor"></a><strong>Launching MODIStsp using a saved “Options file”</strong>
</h2>
<p>Alternatively, you can run MODIStsp without opening the GUI by specifying a previously saved options file:</p>
<div class="sourceCode" id="cb15"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">MODIStsp</span>)

<span class="co"># **NOTE** Output files of examples are saved to file.path(tempdir(), "MODIStsp").</span>

<span class="co"># --&gt; Specify the path to a valid options file saved in advance from MODIStsp GUI </span>
<span class="co"># Here we use a test json file saved in MODIStsp installation folder which</span>
<span class="co"># downloads and processed 3 MOD13A2 images over the Como Lake (Lombardy, Italy)</span>
<span class="co"># and retrieves NDVI and EVI data, plus the Usefulness Index Quality Indicator.</span>

<span class="no">opts_file</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html">system.file</a></span>(<span class="st">"testdata/test_MOD13A2.json"</span>, <span class="kw">package</span> <span class="kw">=</span> <span class="st">"MODIStsp"</span>)

<span class="co"># --&gt; Launch the processing</span>
<span class="fu"><a href="../reference/MODIStsp.html">MODIStsp</a></span>(<span class="kw">gui</span> <span class="kw">=</span> <span class="fl">FALSE</span>, <span class="kw">opts_file</span> <span class="kw">=</span> <span class="no">opts_file</span>, <span class="kw">verbose</span> <span class="kw">=</span> <span class="fl">FALSE</span>)

<span class="co"># Outputs are in this case in subfolder "MODIStsp/VI_16Days_1Km_v6" of </span>
<span class="co"># `base::tempdir()`: </span>

<span class="no">out_fold</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/tempfile.html">tempdir</a></span>(), <span class="st">"MODIStsp/VI_16Days_1Km_v6"</span>)
<span class="fu"><a href="https://rdrr.io/r/base/list.files.html">list.files</a></span>(<span class="no">out_fold</span>)</pre></body></html></div>
<pre><code>## [1] "EVI"         "NDVI"        "QA_usef"     "SR"          "Time_Series"</code></pre>
<div class="sourceCode" id="cb17"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/list.files.html">list.files</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span>(<span class="no">out_fold</span> ,<span class="st">"EVI"</span>))</pre></body></html></div>
<pre><code>## [1] "MOD13A2_EVI_2016_161.tif" "MOD13A2_EVI_2016_177.tif"
## [3] "MOD13A2_EVI_2020_161.tif" "MYD13A2_EVI_2020_153.tif"</code></pre>
<div id="looping-over-different-options-files" class="section level3">
<h3 class="hasAnchor">
<a href="#looping-over-different-options-files" class="anchor"></a><em>Looping over different Options files</em>
</h3>
<p>If you need to process different MODIS products, you can prepare beforehand different MODIStsp options files by using the GUI, and then loop over them like this:</p>
<div class="sourceCode" id="cb19"><html><body><pre class="r"><span class="no">opts_files</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/system.file.html">system.file</a></span>(<span class="st">"testdata/test_MOD13A2.json"</span>, <span class="kw">package</span> <span class="kw">=</span> <span class="st">"MODIStsp"</span>),
                <span class="fu"><a href="https://rdrr.io/r/base/system.file.html">system.file</a></span>(<span class="st">"testdata/test_MOD10A2.json"</span>, <span class="kw">package</span> <span class="kw">=</span> <span class="st">"MODIStsp"</span>))

<span class="kw">for</span> (<span class="no">opts_file</span> <span class="kw">in</span> <span class="no">opts_files</span>) {
  <span class="fu"><a href="../reference/MODIStsp.html">MODIStsp</a></span>(<span class="kw">gui</span>       <span class="kw">=</span> <span class="fl">FALSE</span>,
           <span class="kw">opts_file</span> <span class="kw">=</span> <span class="no">opts_file</span>,
           <span class="kw">verbose</span>   <span class="kw">=</span> <span class="fl">FALSE</span>)
}

<span class="co"># MOD13A2 ouputs</span>
<span class="no">out_fold</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/tempfile.html">tempdir</a></span>(), <span class="st">"MODIStsp/VI_16Days_1Km_v6"</span>)
<span class="fu"><a href="https://rdrr.io/r/base/list.files.html">list.files</a></span>(<span class="no">out_fold</span>)</pre></body></html></div>
<pre><code>## [1] "EVI"         "NDVI"        "QA_usef"     "SR"          "Time_Series"</code></pre>
<div class="sourceCode" id="cb21"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/list.files.html">list.files</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span>(<span class="no">out_fold</span> ,<span class="st">"NDVI"</span>))</pre></body></html></div>
<pre><code>## [1] "MOD13A2_NDVI_2016_161.tif" "MOD13A2_NDVI_2016_177.tif"
## [3] "MOD13A2_NDVI_2020_161.tif" "MYD13A2_NDVI_2020_153.tif"</code></pre>
<div class="sourceCode" id="cb23"><html><body><pre class="r"><span class="co"># MOD10A2 ouputs</span>
<span class="no">out_fold</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/tempfile.html">tempdir</a></span>(), <span class="st">"MODIStsp/Surf_Temp_8Days_1Km_v6"</span>)
<span class="fu"><a href="https://rdrr.io/r/base/list.files.html">list.files</a></span>(<span class="no">out_fold</span>)</pre></body></html></div>
<pre><code>## [1] "Days_Clear"    "LST_Day_1km"   "LST_Night_1km" "Time_Series"</code></pre>
<div class="sourceCode" id="cb25"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/list.files.html">list.files</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span>(<span class="no">out_fold</span> ,<span class="st">"LST_Night_1km"</span>))</pre></body></html></div>
<pre><code>## [1] "MOD11A2_LST_Night_1km_2016_153.tif" "MOD11A2_LST_Night_1km_2016_161.tif"
## [3] "MOD11A2_LST_Night_1km_2016_169.tif" "MOD11A2_LST_Night_1km_2016_177.tif"</code></pre>
</div>
</div>
<div id="specifying-the-processing-parameters-using-a-previously-saved-options-file-and-overwriting-some-parameters" class="section level2">
<h2 class="hasAnchor">
<a href="#specifying-the-processing-parameters-using-a-previously-saved-options-file-and-overwriting-some-parameters" class="anchor"></a><strong>Specifying the processing parameters using a previously saved options file and overwriting some parameters</strong>
</h2>
<p>Finally, it is possible to both specify a previously saved options file AND setting some parameters in the call to the function. This allows to <strong>easily perform similar processings, by only updating the required arguments</strong>, as in the examples below.</p>
</div>
<div id="looping-over-different-spatial-extents" class="section level2">
<h2 class="hasAnchor">
<a href="#looping-over-different-spatial-extents" class="anchor"></a><strong>Looping over different spatial extents</strong>
</h2>
<p>Specifying the <code>spafile</code> parameter while setting the <code>spatmeth</code> parameter to “file” overrides for example the output extent of the selected Options File. This allows to perform the same preprocessing on different extents using a single Options File. For example:</p>
<div class="sourceCode" id="cb27"><html><body><pre class="r"><span class="co"># Run the tool using the settings previously saved in a specific option file</span>
<span class="co"># and specifying the extent from a spatial file allows to re-use the same</span>
<span class="co"># processing settings to perform download and reprocessing on a different area</span>
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">MODIStsp</span>)
<span class="no">opts_file</span>    <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html">system.file</a></span>(<span class="st">"testdata/test_MOD13A2.json"</span>, <span class="kw">package</span> <span class="kw">=</span> <span class="st">"MODIStsp"</span>)
<span class="no">spatial_file</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html">system.file</a></span>(<span class="st">"testdata/lakeshapes/garda_lake.shp"</span>, <span class="kw">package</span> <span class="kw">=</span> <span class="st">"MODIStsp"</span>)
<span class="fu"><a href="../reference/MODIStsp.html">MODIStsp</a></span>(<span class="kw">gui</span>       <span class="kw">=</span> <span class="fl">FALSE</span>,
         <span class="kw">opts_file</span> <span class="kw">=</span> <span class="no">opts_file</span>,
         <span class="kw">spatmeth</span>  <span class="kw">=</span> <span class="st">"file"</span>,
         <span class="kw">spafile</span>   <span class="kw">=</span> <span class="no">spatial_file</span>,
         <span class="kw">verbose</span>   <span class="kw">=</span> <span class="fl">FALSE</span>)

<span class="co"># --&gt; Create a character array containing a list of shapefiles (or other spatial files)</span>
<span class="no">extent_list</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.files.html">list.files</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/system.file.html">system.file</a></span>(<span class="st">"testdata/lakeshapes/"</span>, <span class="kw">package</span> <span class="kw">=</span> <span class="st">"MODIStsp"</span>), <span class="kw">full.names</span> <span class="kw">=</span> <span class="fl">TRUE</span>, <span class="st">"\\.shp$"</span>)

<span class="no">extent_list</span></pre></body></html></div>
<pre><code>## [1] "D:/Documents/R/win-library/4.0/MODIStsp/testdata/lakeshapes/garda_lake.shp"
## [2] "D:/Documents/R/win-library/4.0/MODIStsp/testdata/lakeshapes/iseo_lake.shp"</code></pre>
<div class="sourceCode" id="cb29"><html><body><pre class="r"><span class="co"># --&gt; Loop on the list of spatial files and run MODIStsp using each of them to </span>
<span class="co"># automatically define the output extent (A separate output folder is created for</span>
<span class="co"># each input spatial file).</span>

<span class="kw">for</span> (<span class="no">single_shape</span> <span class="kw">in</span> <span class="no">extent_list</span>) {
  <span class="fu"><a href="../reference/MODIStsp.html">MODIStsp</a></span>(<span class="kw">gui</span>       <span class="kw">=</span> <span class="fl">FALSE</span>,
           <span class="kw">opts_file</span> <span class="kw">=</span> <span class="no">opts_file</span>,
           <span class="kw">spatmeth</span>  <span class="kw">=</span> <span class="st">"file"</span>,
           <span class="kw">spafile</span>   <span class="kw">=</span> <span class="no">single_shape</span>,
           <span class="kw">verbose</span>   <span class="kw">=</span> <span class="fl">FALSE</span>)
}

<span class="co"># output files are placed in separate folders: </span>

<span class="no">outfiles_garda</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.files.html">list.files</a></span>(
  <span class="fu"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/tempfile.html">tempdir</a></span>(), <span class="st">"MODIStsp/garda_lake/VI_16Days_1Km_v6/EVI"</span>),
  <span class="kw">full.names</span> <span class="kw">=</span> <span class="fl">TRUE</span>)
<span class="no">outfiles_garda</span></pre></body></html></div>
<pre><code>## [1] "D:/RTemp\\RtmpInLQqC/MODIStsp/garda_lake/VI_16Days_1Km_v6/EVI/MOD13A2_EVI_2016_161.tif"
## [2] "D:/RTemp\\RtmpInLQqC/MODIStsp/garda_lake/VI_16Days_1Km_v6/EVI/MOD13A2_EVI_2016_177.tif"</code></pre>
<div class="sourceCode" id="cb31"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">raster</span>)
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/plot.html">plot</a></span>(<span class="fu"><a href="https://rdrr.io/pkg/raster/man/raster.html">raster</a></span>(<span class="no">outfiles_garda</span>[<span class="fl">1</span>]))</pre></body></html></div>
<p><img src="MODIStsp_files/figure-html/unnamed-chunk-11-1.png" width="700"></p>
<div class="sourceCode" id="cb32"><html><body><pre class="r"><span class="no">outfiles_iseo</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.files.html">list.files</a></span>(
  <span class="fu"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/tempfile.html">tempdir</a></span>(), <span class="st">"MODIStsp/iseo_lake/VI_16Days_1Km_v6/EVI"</span>),
  <span class="kw">full.names</span> <span class="kw">=</span> <span class="fl">TRUE</span>)
<span class="no">outfiles_iseo</span></pre></body></html></div>
<pre><code>## [1] "D:/RTemp\\RtmpInLQqC/MODIStsp/iseo_lake/VI_16Days_1Km_v6/EVI/MOD13A2_EVI_2016_161.tif"
## [2] "D:/RTemp\\RtmpInLQqC/MODIStsp/iseo_lake/VI_16Days_1Km_v6/EVI/MOD13A2_EVI_2016_177.tif"</code></pre>
<div class="sourceCode" id="cb34"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/pkg/raster/man/plot.html">plot</a></span>(<span class="fu"><a href="https://rdrr.io/pkg/raster/man/raster.html">raster</a></span>(<span class="no">outfiles_iseo</span>[<span class="fl">1</span>]))</pre></body></html></div>
<p><img src="MODIStsp_files/figure-html/unnamed-chunk-11-2.png" width="700"></p>
</div>
</div>
<div id="scheduled-processing" class="section level1">
<h1 class="hasAnchor">
<a href="#scheduled-processing" class="anchor"></a>Scheduled Processing</h1>
<p>Stand-alone non-interactive execution can be used to periodically and automatically update the time series of a selected product over a given study area. To do that, you should simply:</p>
<ol style="list-style-type: decimal">
<li><p>Open the <code>MODIStsp</code> GUI, define the parameters of the processing specifying a date in the future as the “Ending Date” and save the processing options. Then quit the program.</p></li>
<li><p>Schedule non-interactive execution of the launcher installed as seen before (or located in the subdirectory “MODIStsp/ExtData/Launcher” of your library path) as windows scheduled task (or linux “cron” job) according to a specified time schedule, specifying the path of a previously saved Options file as additional argument:</p></li>
</ol>
<div id="on-linux" class="section level4">
<h4 class="hasAnchor">
<a href="#on-linux" class="anchor"></a>On Linux</h4>
<ul>
<li>edit your crontab by opening a terminal and type:</li>
</ul>
<div class="sourceCode" id="cb35"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb35-1"><a href="#cb35-1"></a>  <span class="ex">crontab</span> -e</span></code></pre></div>
<ul>
<li>add an entry for the launcher. For example, if you have installed it in /usr/bin and you want to run the tool every day at 23.00, add the following row:</li>
</ul>
<div class="sourceCode" id="cb36"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb36-1"><a href="#cb36-1"></a>  <span class="ex">0</span> 23 * * * /bin/bash /usr/bin/MODIStsp -g -s <span class="st">"/yourpath/youroptions.json"</span></span></code></pre></div>
</div>
<div id="on-windows-1" class="section level4">
<h4 class="hasAnchor">
<a href="#on-windows-1" class="anchor"></a>On Windows</h4>
<ul>
<li>create a Task following <a href="https://technet.microsoft.com/en-us/library/cc748993.aspx">these instructions</a>; add the path of the MODIStsp.bat launcher as Action (point 6), and specifying <code>-g -s "X:/yourpath/youroptions.json"</code> as argument.</li>
</ul>
</div>
</div>
<div id="outputs-format-and-naming-conventions" class="section level1">
<h1 class="hasAnchor">
<a href="#outputs-format-and-naming-conventions" class="anchor"></a>Outputs Format and Naming Conventions</h1>
<div id="single-band-outputs" class="section level2">
<h2 class="hasAnchor">
<a href="#single-band-outputs" class="anchor"></a>Single-band outputs</h2>
<p>Output raster files are saved in specific subfolders of the main output folder. In particular, <strong>a separate subfolder</strong> is created for each processed original MODIS layer, Quality Indicator or Spectral Index. Each subfolder contains one image for each processed date, created according to the following naming conventions:</p>
<pre><code>myoutfolder/"Layer"/"ProdCode"_"Layer"_"YYYY"_"DOY"."ext"</code></pre>
<p><font size="2"> <em>(e.g., myoutfolder/NDVI/MOD13Q1_NDVI_2000_065.dat)</em> </font></p>
<p>, where:</p>
<ul>
<li>
<strong><em>Layer</em></strong> is a short name describing the dataset (e.g., b1_Red, NDII, UI);</li>
<li>
<strong><em>ProdCode</em></strong> is the code name of the MODIS product from which the image was derived (e.g., MOD13Q1);</li>
<li>
<strong><em>YYYY</em></strong> and <strong><em>DOY</em></strong> correspond to the year and DOY (Day of the Year) of acquisition of the original MODIS image;</li>
<li>
<strong><em>ext</em></strong> is the file extension (.tif for GTiff outputs, or .dat for ENVI outputs).</li>
</ul>
<hr>
</div>
<div id="virtual-multi-band-outputs" class="section level2">
<h2 class="hasAnchor">
<a href="#virtual-multi-band-outputs" class="anchor"></a>Virtual multi-band outputs</h2>
<p>ENVI and/or GDAL virtual time series files and <em>RasterStack</em> RData objects are instead stored <strong>in the “Time_Series” subfolder</strong> if required.</p>
<p>Naming convention for these files is as follow:</p>
<pre><code>myoutfolder/Time_Series/"vrt_type"/"Sensor"/"Layer"/"ProdCode"_"Layer"_"StartDOY"_"StartYear_"EndDOY"_"EndYear_"suffix".ext" </code></pre>
<p><font size="2"> <em>(e.g., myoutfolder/Time_Series/RData/Terra/NDVI/MOD13Q1_MYD13Q1_NDVI_49_2000_353_2015_RData.RData)</em> </font></p>
<p>, where:</p>
<ul>
<li>
<strong><em>vrt_type</em></strong> indicates the type of virtual file (“RData”, “GDAL” or “ENVI_META”);</li>
<li>
<strong><em>Sensor</em></strong> indicates to which MODIS sensor the time series belongs (“Terra”, “Aqua”, “Mixed” or “Combined” (for MCD* products));</li>
<li>
<strong><em>Layer</em></strong> is a short name describing the dataset (e.g., b1_Red, NDII, UI);</li>
<li>
<strong><em>ProdCode</em></strong> is the code name of the MODIS product from which the image was derived (e.g., MOD13Q1);</li>
<li>
<strong><em>StartDOY</em></strong>, <strong><em>StartYear</em></strong>, <strong><em>EndDOY</em></strong> and <strong><em>EndYear</em></strong> indicate the temporal extent of the time serie created;</li>
<li>
<strong><em>suffix</em></strong> indicates the type of virtual file (ENVI, GDAL or RData);</li>
<li>
<strong><em>ext</em></strong> is the file extension (“.vrt” for gdal virtual files, “META” for ENVI meta files or “RData” for <code>R</code> raster stacks).</li>
</ul>
</div>
</div>
<div id="accessing-the-processed-time-series-from-r" class="section level1">
<h1 class="hasAnchor">
<a href="#accessing-the-processed-time-series-from-r" class="anchor"></a>Accessing the processed time series from R</h1>
<p>Preprocessed MODIS data can be retrieved within <code>R</code> either by accessing the single-date raster files, or by loading the saved <em>RasterStack</em> objects.</p>
<p>Any single-date image can be accessed by simply opening it with a <code>raster</code> command:</p>
<div class="sourceCode" id="cb39"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">raster</span>)
<span class="no">modistsp_file</span> <span class="kw">&lt;-</span> <span class="st">"/my_outfolder/EVI/MOD13Q1_2005_137_EVI.tif"</span>
<span class="no">my_raster</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/raster/man/raster.html">raster</a></span>(<span class="no">modistsp_file</span>)</pre></body></html></div>
<p><code>rasterStack</code> time series containing all the processed data for a given parameter (saved in the “Time Series/RData” subfolder - see <a href="output.html">here</a> for details) can be opened by:</p>
<div class="sourceCode" id="cb40"><html><body><pre class="r"><span class="no">in_virtual_file</span> <span class="kw">&lt;-</span> <span class="st">"/my_outfolder/Time_Series/RData/Terra/EVI/MOD13Q1_MYD13Q1_NDVI_49_2000_353_2015_RData.RData"</span>
<span class="no">indata</span>          <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/get.html">get</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/load.html">load</a></span>(<span class="no">in_virtual_file</span>))</pre></body></html></div>
<p>This second option allows accessing the complete data stack and analyzing it using the functionalities for raster/raster time series analysis, extraction and plotting provided for example by the <code>raster</code> or <code>rasterVis</code> packages.</p>
<div id="extracting-time-series-data-on-areas-of-interest" class="section level2">
<h2 class="hasAnchor">
<a href="#extracting-time-series-data-on-areas-of-interest" class="anchor"></a>Extracting Time Series Data on Areas of Interest</h2>
<p><code>MODIStsp</code> provides an efficient function (<code>MODIStsp\_extract</code>) for extracting time series data at specific locations. The function takes as input a <em>RasterStack</em> virtual object created by <code>MODIStsp</code> (see above), the starting and ending dates for the extraction and a standard _Sp*_ object (or an ESRI shapefile name) specifying the locations (points, lines or polygons) of interest, and provides as output a <code>xts</code> object or <code>data.frame</code> containing time series data for those locations.</p>
<p>If the input is of class <em>SpatialPoints</em>, the output object contains one column for each point specified, and one row for each date. If it is of class <em>SpatialPolygons</em> (or <em>SpatialLines</em>), it contains one column for each polygon (or each line), with values obtained applying the function specified as the “FUN” argument (e.g., mean, standard deviation, etc.) on pixels belonging to the polygon (or touched by the line), and one row for each date.</p>
<p>As an example the following code:</p>
<div class="sourceCode" id="cb41"><html><body><pre class="r">  <span class="co">#Set the input paths to raster and shape file</span>
  <span class="no">infile</span>    <span class="kw">&lt;-</span> <span class="st">'myoutfolder/Time_Series/RData/Mixed/MOD13Q1_MYD13Q1_NDVI_49_2000_353_2015_RData.RData'</span>
  <span class="no">shpname</span>   <span class="kw">&lt;-</span> <span class="st">'path_to_file/rois.shp'</span>
  <span class="co">#Set the start/end dates for extraction</span>
  <span class="no">startdate</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html">as.Date</a></span>(<span class="st">"2010-01-01"</span>)
  <span class="no">enddate</span>   <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html">as.Date</a></span>(<span class="st">"2014-12-31"</span>)
  <span class="co">#Load the RasterStack</span>
  <span class="no">inrts</span>     <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/get.html">get</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/load.html">load</a></span>(<span class="no">infile</span>))
  <span class="co"># Compute average and St.dev</span>
  <span class="no">dataavg</span>   <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/MODIStsp_extract.html">MODIStsp_extract</a></span>(<span class="no">inrts</span>, <span class="no">shpname</span>, <span class="no">startdate</span>, <span class="no">enddate</span>, <span class="kw">FUN</span> <span class="kw">=</span> <span class="st">'mean'</span>, <span class="kw">na.rm</span> <span class="kw">=</span> <span class="no">T</span>)
  <span class="no">datasd</span>    <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/MODIStsp_extract.html">MODIStsp_extract</a></span> (<span class="no">inrts</span>, <span class="no">shpname</span>, <span class="no">startdate</span>, <span class="no">enddate</span>, <span class="kw">FUN</span> <span class="kw">=</span> <span class="st">'sd'</span>, <span class="kw">na.rm</span> <span class="kw">=</span> <span class="no">T</span>)
  <span class="co"># Plot average time series for the polygons</span>
  <span class="fu">plot.xts</span>(<span class="no">dataavg</span>)</pre></body></html></div>
<p>loads a <em>RasterStack</em> object containing 8-days 250 m resolution time series for the 2000-2015 period and extracts time series of average and standard deviation values over the different polygons of a user’s selected shapefile on the 2010-2014 period.</p>
</div>
</div>
<div id="problems-and-issues" class="section level1">
<h1 class="hasAnchor">
<a href="#problems-and-issues" class="anchor"></a>Problems and Issues</h1>
<p>Solutions to some common <strong>installation and processing problems</strong> can be found in MODIStsp FAQ:</p>
<p><a href="https://docs.ropensci.org/MODIStsp/articles/faq.html" class="uri">https://docs.ropensci.org/MODIStsp/articles/faq.html</a></p>
<ul>
<li>Please <strong>report any issues</strong> you may encounter in our issues page on GitHub:</li>
</ul>
<p><a href="https://github.com/ropensci/MODIStsp/issues" class="uri">https://github.com/ropensci/MODIStsp/issues</a></p>
</div>
<div id="citation" class="section level1">
<h1 class="hasAnchor">
<a href="#citation" class="anchor"></a>Citation</h1>
<p>To cite MODIStsp please use:</p>
<p>L. Busetto, L. Ranghetti (2016) MODIStsp: An R package for automatic preprocessing of MODIS Land Products time series, Computers &amp; Geosciences, Volume 97, Pages 40-48, ISSN 0098-3004, <a href="https://doi.org/10.1016/j.cageo.2016.08.020" class="uri">https://doi.org/10.1016/j.cageo.2016.08.020</a>, URL: <a href="https://github.com/ropensci/MODIStsp" class="uri">https://github.com/ropensci/MODIStsp</a>.</p>
</div>
<div id="references" class="section level1 unnumbered">
<h1 class="hasAnchor">
<a href="#references" class="anchor"></a>References</h1>
<div id="refs" class="references hanging-indent">
<div id="ref-Hengl2010">
<p>Hengl, T. 2010. “Download and resampling of MODIS images.” <a href="http://spatial-analyst.net/wiki/index.php?title=Download_and_resampling_of_MODIS_images">http://spatial-analyst.net/wiki/index.php?title=Download_and_resampling_of_MODIS_images</a>.</p>
</div>
<div id="ref-Naimi2014">
<p>Naimi, B. 2014. “ModisDownload: an R function to download, mosaic, and reproject the MODIS images.” <a href="http://r-gis.net/?q=ModisDownload">http://r-gis.net/?q=ModisDownload</a>.</p>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Lorenzo Busetto, Luigi Ranghetti.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
